import { useRef } from "react";
import clsx from "clsx";
import { animated } from "react-spring";
import { useAnimatedSvgPath, useIntersectionObserver } from "@hooks";

const IdeaLightBulbAnimatePath = ({
  toggle,
  strokeColor = null,
  fillColor = null,
  d,
  transform,
}) => {
  const animationProps = useAnimatedSvgPath({
    toggle,
    pathLength: 200,
    duration: 2000,
  });

  return (
    <animated.path
      {...animationProps}
      className={clsx(
        "stroke-[0.2px]", // stroke width
        strokeColor, // stroke color
        toggle // fill color
          ? clsx(fillColor, "delay-[2s]")
          : clsx("fill-transparent"),
        "transition-[fill] duration-1000" // fill color animation
      )}
      fillRule="evenodd"
      fillOpacity={1}
      d={d}
      transform={transform}
    />
  );
};

const IdeaLightBulb = ({
  className,
  strokeColor = "stroke-coffee-600/50 dark:stroke-coffee-300/50",
  fillColor = "fill-coffee-600 dark:fill-coffee-300",
  lightStrokeColor = "stroke-yellow-100/50 dark:stroke-yellow-600/50",
  lightFillColor = "fill-yellow-300 dark:fill-yellow-500",
}) => {
  const svgContainerRef = useRef(null);

  const isEntered = useIntersectionObserver(
    svgContainerRef,
    { threshold: 0.5 }, // callback at 50% of the view
    true
  );

  // ************************* JSX ************************* //
  return (
    <svg
      ref={svgContainerRef}
      xmlns="http://www.w3.org/2000/svg"
      viewBox="38 -20 25 88"
      fill="none"
      className={className}
      // width="100pt" // height="71.536"
    >
      <IdeaLightBulbAnimatePath
        toggle={isEntered}
        strokeColor={lightStrokeColor}
        fillColor={lightFillColor}
        d="M20.567 29.292a67.355 67.355 0 0 0 1.375-1.684 92.32 92.32 0 0 0 1.616-2.26c.303-.475.051-.998-.482-1.004-.244-.005-.403.075-.726.365l-.295.267.143-.347c.08-.19.302-.727.494-1.196.501-1.208.555-1.414.465-1.73-.11-.375-.44-.54-.829-.421-.321.099-.532.329-.985 1.06-.195.315-.368.577-.388.586-.015.009.096-.306.25-.701.335-.865.566-1.51.848-2.39.227-.704.262-1.002.148-1.22-.141-.265-.458-.386-.797-.301-.196.048-.228.07-.469.309-.314.312-.605.77-2.148 3.374-.213.36-.403.664-.423.674-.02.009.134-.459.347-1.039.59-1.624 1.417-4.118 1.561-4.704.173-.704.001-1.132-.467-1.166-.27-.021-.43.049-.658.281-.189.193-.227.253-.433.742-.514 1.195-1.971 4.155-2.047 4.152-.01 0 .063-.221.163-.488.195-.525.683-2.089.842-2.7.152-.583.093-.907-.198-1.081-.238-.141-.682-.048-.925.194-.13.129-.266.37-.813 1.435-.696 1.361-1.044 2.006-1.074 2.005-.033-.004.105-.473.418-1.394.43-1.28.5-1.67.343-1.935-.154-.262-.487-.357-.8-.23-.24.097-.435.323-.72.827a92.889 92.889 0 0 1-1.303 2.065c-1.317 2.036-1.503 2.379-1.588 2.916-.042.247-.015.509.058.583.06.061.225.05.355-.021.192-.102.591-.52.854-.898.133-.19.266-.365.293-.392.071-.071.003.15-.436 1.406-.676 1.93-.842 2.563-.75 2.861.126.401.51.508.915.262.129-.076.203-.154.372-.391.291-.4 1.124-1.607 1.285-1.862.075-.116.14-.208.15-.207.041.002-.311 1.036-.803 2.351-.587 1.573-.645 1.804-.506 2.066.122.226.412.321.693.226.328-.111.702-.614 1.948-2.628.238-.384.445-.7.455-.7.013-.002-.131.383-.315.85-.494 1.249-.815 2.153-.862 2.435-.052.32.006.531.189.69.17.146.385.185.621.114.161-.049.213-.086.472-.349.238-.242.42-.481 1.009-1.335.394-.571.737-1.054.764-1.071.027-.017-.075.238-.224.565-.502 1.109-.698 1.736-.655 2.098.048.441.403.645.855.501.196-.063.225-.088.595-.461.216-.215.475-.504.574-.64.099-.136.192-.249.207-.248.01 0-.011.116-.052.262-.237.856-.061 1.317.513 1.325.266.003.611-.224.979-.649"
        transform="rotate(90 50 24)"
      />
      <IdeaLightBulbAnimatePath
        toggle={isEntered}
        strokeColor={strokeColor}
        fillColor={fillColor}
        d="M17.921 26.038a4.827 4.827 0 0 1-.31-.11 1.231 1.231 0 0 1 .187-.183c.173-.147.205-.19.232-.313.038-.152.003-.397-.078-.568-.065-.13-.05-.145.11-.14.202.008.315-.045.512-.242.215-.215.303-.418.308-.693.002-.103.01-.185.022-.183.01 0 .105.025.208.053.343.093.73-.07.933-.387.042-.073.087-.123.098-.113.007.008.05.12.09.25l.075.24-.3.3c-.165.165-.395.42-.513.562-.115.145-.38.455-.587.688a5.895 5.895 0 0 0-.515.66l-.155.255c-.007.012-.152-.023-.318-.078Zm3.495 2.18c-.268-.193-.985-.74-1.333-1.018a6.802 6.802 0 0 0-1.3-.82 4.805 4.805 0 0 1-.443-.232c.01-.065.462-.642.717-.923.178-.193.42-.47.538-.612.237-.288.742-.808.765-.785.008.007.057.128.115.27.515 1.285.865 1.85 1.683 2.713l.48.51-.395.41c-.215.225-.445.46-.51.52l-.112.113Zm-.958 1.158c-.423-.208-1.115-.355-1.743-.373a7.494 7.494 0 0 1-.77-.065c-.19-.03-.492-.068-.675-.085-.75-.075-1.968-.428-2.68-.775-.863-.423-1.938-1.293-2.398-1.943-.6-.85-1.035-1.915-1.135-2.77-.037-.313-.022-1.128.025-1.39.095-.52.373-1.233.728-1.873.325-.58.62-.945 1.4-1.725.925-.93 1.275-1.185 2.215-1.61.81-.365 1.305-.49 1.975-.5.655-.01 1.292.097 1.745.295.363.158.91.55 1.355.97.357.333.468.458.79.895.207.282.445.63.523.778.195.35.592 1.388.683 1.778.082.357.202 1.208.305 2.135.073.668.208 1.573.29 1.925.063.277.175.575.377.998l.173.353-.137.132a9.186 9.186 0 0 1-.35.31l-.213.172-.315-.315a8.473 8.473 0 0 1-1.005-1.23c-.47-.75-.988-2.008-1.145-2.79-.075-.37-.303-.498-.413-.233-.095.22-.228.438-.387.627-.142.168-.175.19-.287.203-.068.008-.255-.03-.415-.08-.157-.053-.32-.095-.36-.09-.122.012-.168.127-.137.382.03.285-.008.487-.118.643-.12.17-.267.208-.607.157-.45-.065-.573.068-.338.373.142.187.25.445.245.595-.005.105-.015.12-.165.22-.09.055-.29.15-.45.21l-.287.103.01.105c.012.123.117.203.367.287 1.015.34 1.893.818 2.795 1.52.26.205.527.408.598.453.17.11.727.552.727.577.003.028-.457.578-.553.663-.067.063-.095.06-.242-.012Zm1.195.435c-.115.09-.157.098-.35.07-.19-.025-.392-.108-.39-.16a7.737 7.737 0 0 1 .41-.455c1.243-1.323 1.645-1.735 2.045-2.1l.438-.403.083.108c.047.057.105.21.132.332l.05.23-.147.167c-.213.243-2.115 2.095-2.27 2.21Zm2.02-.07c-.798.717-.832.742-1.125.795-.358.068-.427.038-.608-.257l-.14-.235 1.233-1.193c.677-.658 1.243-1.197 1.26-1.2.055-.015.32.275.39.425.08.165.14.545.1.62-.032.062-.48.485-1.11 1.045Zm.035 1.11c-.135.08-.308.167-.38.19-.125.045-.14.04-.25-.075-.065-.065-.117-.143-.117-.173 0-.035.21-.24.665-.655.365-.335.833-.763 1.043-.953l.377-.347.09.075c.102.083.145.23.11.36-.017.053-.175.25-.4.49-.732.798-.877.933-1.138 1.088Zm1.983-.748a.834.834 0 0 0-.027-.332c-.037-.128-.042-.223-.01-.285.083-.163.09-.305.017-.538-.08-.265-.195-.435-.335-.495-.083-.037-.1-.06-.103-.147-.017-.353-.367-.928-.648-1.053-.073-.032-.092-.073-.125-.25a1.273 1.273 0 0 0-.352-.627.81.81 0 0 1-.155-.23 17.935 17.935 0 0 0-.192-.447c-.285-.635-.335-.875-.575-2.68a14.846 14.846 0 0 1-.065-.61 14.222 14.222 0 0 0-.252-1.653c-.065-.25-.235-.715-.48-1.31-.142-.348-.423-.788-.855-1.345-.798-1.033-1.588-1.668-2.475-1.98-.577-.202-.893-.257-1.422-.238-1.098.038-1.92.275-2.963.858-.81.45-.998.593-1.793 1.383-1.113 1.108-1.6 1.84-2 3.005-.195.58-.257.873-.275 1.315-.037 1.063.13 1.78.682 2.908.355.72.605 1.105 1.005 1.54.527.578 1.47 1.285 2.053 1.548.87.39 1.14.48 1.845.63.398.083.917.173 1.152.198.238.022.558.063.715.085.16.02.445.045.64.05 1.103.042 1.535.18 1.89.59.208.237.262.267.637.338l.185.035.135.225c.223.368.548.548.898.503l.145-.02.073.142c.142.298.54.445.83.305.078-.038.155-.055.175-.035.06.06.32.125.42.105.245-.05.425-.19 1.01-.775.55-.55.568-.573.595-.71"
        transform="rotate(90 50 24)"
      />
      <IdeaLightBulbAnimatePath
        toggle={isEntered}
        strokeColor={strokeColor}
        fillColor={fillColor}
        d="M24.397 30.013c-.012-.012-.057.002-.098.042-.255.23-.808.658-.96.74-.085.045-.135.09-.127.113.017.073.105.04.315-.12.115-.09.303-.233.415-.32.267-.202.487-.423.455-.455m.76-.82c-.005-.03-.057.007-.255.2-.042.042-.095.07-.12.065-.063-.013-.055.055.012.083.045.02.088-.008.213-.143.088-.093.155-.185.15-.205m-1.358 1.073c-.012-.013-.09.04-.178.112a.993.993 0 0 1-.272.172c-.127.042-.15.09-.057.113.095.02.563-.343.507-.398m.858-1.752c.02-.03.025-.065.012-.077-.03-.03-.247.187-.235.24.008.022.02.035.032.022a.96.96 0 0 0 .19-.185m-1.034 1.025c.05-.095.042-.093-.212.137-.445.395-.855.72-.9.71-.025-.005-.045.005-.045.02 0 .05.08.06.17.02.147-.068.92-.76.987-.888m.937-1.286c-.005-.025-.045-.005-.098.047-.047.047-.082.108-.077.128.005.025.045.005.097-.047.048-.047.085-.105.078-.128m-1.837 1.752c-.025-.005-.12.055-.215.13a3.874 3.874 0 0 1-.247.183c-.037.022-.057.052-.042.068.03.03.115-.02.355-.215.127-.103.177-.157.15-.165m1.661-2.078c-.005-.02-.033-.017-.06.01-.03.03-.04.065-.027.078.015.015.04.01.06-.01.02-.02.035-.055.028-.078m-2.086.99c-.018-.018-.105.05-.235.18-.113.113-.305.29-.428.398-.14.12-.21.2-.195.215.042.042.098-.003.495-.39.263-.253.38-.385.363-.403m-.777.472c-.013-.012-.05 0-.085.03-.03.03-.11.1-.175.15-.088.073-.11.105-.08.12.055.025.38-.26.34-.3m.285-9.435a.848.848 0 0 0-.053-.182.48.48 0 0 1-.052-.127c-.073-.228-.282-.558-.63-.98-.377-.463-.692-.783-.73-.745-.035.035.003.083.335.445.423.463.715.86.885 1.22.075.165.145.32.145.345.012.082.09.235.113.213.012-.012.005-.095-.013-.187m-8.906 6.243a3.018 3.018 0 0 0-.188-.263c-.275-.365-.768-1.408-.888-1.878a24.155 24.155 0 0 1-.115-.56c-.092-.473-.13-.59-.165-.525-.047.093.117 1.023.25 1.415.2.59.59 1.355.837 1.643.138.163.213.228.245.22.025-.005.035-.03.023-.052m-1.299-3.705c-.01-.14-.045-.27-.08-.305-.037-.037-.032.367.008.408.027.027.08-.04.072-.103m14.366.77c.002-.098-.09-.19-.225-.235-.138-.043-1.028-.032-1.073.012-.073.073-.07.225.003.297.055.055.185.075.572.098.623.032.723.007.723-.172m-9.161 8.626c.013-.048.005-.33-.022-.633-.03-.4-.06-.565-.11-.615-.15-.15-.318-.027-.338.248-.037.477.033.998.148 1.113.045.045.225.05.267.008a.439.439 0 0 0 .055-.12m8.996-12.857c.027-.153-.117-.273-.298-.248-.17.025-1.115.335-1.165.385-.063.063-.032.218.055.27.083.047.155.035.873-.133.428-.102.515-.145.535-.275M12.041 30.808c.103-.182.355-.92.355-1.04 0-.145-.1-.235-.233-.208-.127.028-.13.035-.395.725-.195.51-.192.678.013.703.1.01.188-.047.26-.18M23.509 15.2a.19.19 0 0 0-.183-.182c-.1 0-.433.278-.735.615-.275.3-.323.403-.233.492.113.113.205.06.7-.415.398-.377.453-.442.45-.51M9.461 26.688c0-.07-.103-.183-.18-.2-.05-.01-.72.27-1.088.458-.24.12-.318.298-.188.428.093.093.195.065.76-.21.538-.258.695-.365.695-.475m9.344-12.374a3.48 3.48 0 0 0 .078-.442c.02-.175.053-.408.073-.518.053-.297-.088-.468-.262-.327-.093.073-.113.163-.142.632-.04.605-.035.72.017.773.085.085.187.033.237-.117M8.734 21.785c-.033-.143-.495-.185-1.278-.118-.263.022-.363.047-.423.108-.095.095-.098.177-.008.267.09.09.318.102.728.037.18-.03.442-.068.58-.08.18-.02.272-.047.33-.105.042-.043.078-.093.07-.11m5.801-7.044c-.013-.138-.233-1.072-.277-1.172-.06-.13-.158-.178-.273-.138-.117.048-.157.178-.102.358l.09.37c.125.56.235.795.375.795.09 0 .195-.12.188-.212m-3.809 2.352a.196.196 0 0 0 .017-.118c-.012-.137-.77-.825-1.028-.937a.274.274 0 0 0-.185-.005c-.082.032-.1.055-.112.147-.015.1 0 .13.132.257.343.332.84.73.938.752.105.02.195-.015.238-.097m60.117 11.916c.078.089.062.143-.195.584-.396.69-.649 1.011-.888 1.131-.185.096-.277.075-.29-.062-.031-.297.29-1.049.57-1.346.171-.178.513-.372.656-.372.048 0 .116.031.147.065Zm-5.996-.099c.044.082.037.106-.123.359-.427.693-.922 1.264-1.035 1.196-.051-.031-.041-.386.021-.615.054-.219.294-.632.485-.844a.528.528 0 0 1 .468-.188c.106.007.143.027.185.092Zm3.331-.185c.031.01.055.062.055.109 0 .185-.584.622-.83.622h-.096l.085-.147c.143-.236.349-.454.506-.533.157-.075.195-.085.28-.051Zm-1.527-3.14c-.092.103-.205.328-.793 1.616-.311.68-.557 1.148-.669 1.278-.014.014-.079-.01-.143-.062-.253-.191-.67-.184-.95.021-.078.055-.263.185-.41.283-.516.348-.953.769-1.384 1.326-.56.728-.653.82-.892.892-.069.024-.079.014-.079-.075 0-.144.249-.96.479-1.561.106-.284.205-.553.219-.605.027-.12-.027-.26-.127-.304-.126-.058-.242.01-.358.215-.12.215-.495.574-.772.741-.226.133-.851.359-1.568.56-.519.144-.519.144-1.083.14-.919-.003-1.582-.147-3.467-.741a8.455 8.455 0 0 1-1.288-.499c-.649-.314-.885-.4-1.551-.564-.704-.171-1.045-.219-1.845-.26-.789-.041-1.206-.017-1.892.106-.854.15-1.363.321-2.467.83-.854.4-2.337 1.288-3.187 1.917-.912.673-1.999 1.336-2.682 1.64-1.787.786-3.976 1.308-5.948 1.418-1.045.058-1.817-.02-2.713-.266-.263-.075-.823-.229-1.247-.345-.424-.12-.892-.263-1.042-.321-.359-.14-1.517-.714-1.701-.84a8.54 8.54 0 0 0-.601-.328 6.809 6.809 0 0 1-.728-.413c-.29-.198-.304-.202-.407-.15-.072.041-.085.14-.027.243.072.137.564.488.912.653.191.092.461.239.598.325.26.171 1.301.67 1.821.878.171.068.646.212 1.059.325.41.109 1.011.273 1.329.359.922.249 1.732.325 2.853.263 1.5-.082 3.081-.389 4.523-.881 1.199-.407 1.602-.584 2.583-1.138.598-.338.94-.56 1.749-1.131 1.117-.793 2.022-1.343 2.948-1.794 1.104-.536 1.572-.693 2.576-.875.372-.068.536-.079 1.233-.075.922.003 1.24.037 1.998.208.738.164.96.243 1.657.574.629.297.701.325 1.793.676.783.253 1.281.389 1.913.523.399.085.516.096 1.162.096l.717.003.57-.164c.882-.253 1.531-.512 1.746-.7.072-.065.072-.062-.013.184-.147.427-.27.922-.27 1.086 0 .212.099.437.222.519.133.085.345.068.601-.048.352-.161.461-.277 1.237-1.281.331-.431.321-.431.304.044-.014.389-.01.413.072.557a.51.51 0 0 0 .465.263c.273 0 .553-.208.915-.673l.14-.181-.02.369c-.014.321-.007.389.055.529.089.205.236.297.468.297.28-.003.632-.202 1.076-.611l.222-.208.045.212c.075.369.263.536.646.567.458.034.956-.253 1.643-.95l.208-.212-.051.181c-.109.417-.027.813.198.953.147.096.458.082.68-.027.157-.075.454-.352.632-.588.082-.109.089-.113.071-.034-.055.229-.065.485-.027.642.082.342.338.447.786.331.307-.079.458-.16 1.226-.673.711-.471 1.448-.857 2.005-1.052.167-.058.581-.178.922-.266l.615-.161h.769c.424.003.94.024 1.145.048.652.079 1.882.407 3.563.946 1.5.485 2.009.625 2.62.731 1.503.256 2.412.263 4.052.034 1.291-.181 2.767-.646 4.096-1.291.744-.362 1.127-.653 1.042-.793-.044-.072-.205-.027-.557.154-1.1.567-2.569 1.1-3.751 1.36-.987.219-2.299.352-3.157.321-1.376-.051-2.384-.263-4.185-.881-1.705-.584-2.952-.919-3.73-1.004-1.332-.143-2.545.01-3.754.478-.629.242-1.25.581-1.978 1.073-.694.468-.892.571-1.131.591l-.133.01.007-.29c.004-.301.058-.526.352-1.544.14-.482.144-.506.089-.588-.058-.092-.154-.113-.263-.055-.051.031-.089.017-.192-.058-.109-.082-.154-.096-.349-.092a.834.834 0 0 0-.447.116 5.73 5.73 0 0 0-1.5 1.168c-.676.765-1.155 1.093-1.489 1.018a.486.486 0 0 1-.168-.068c-.048-.048-.034-.618.017-.775.034-.106.044-.113.161-.092.164.024.471-.055.683-.178.249-.143.635-.55.683-.717.055-.191.051-.28-.024-.444-.082-.181-.253-.266-.533-.266-.478-.003-.929.41-1.291 1.175-.102.219-.191.328-.611.758-.39.4-.536.523-.687.591-.106.051-.212.079-.232.065-.065-.038-.014-.605.082-.919.246-.799.817-2.262 1.196-3.058.389-.823.523-1.24.434-1.349-.069-.082-.215-.062-.318.041"
        transform="rotate(90 50 24)"
      />
      <IdeaLightBulbAnimatePath
        toggle={isEntered}
        strokeColor={strokeColor}
        fillColor={fillColor}
        d="M62.196 27.14c-.263.29-.232.721.051.721.058 0 .13-.017.157-.041.062-.051.191-.427.191-.55 0-.195-.263-.277-.399-.13"
        transform="rotate(90 50 24)"
      />
    </svg>
  );
};

export default IdeaLightBulb;
